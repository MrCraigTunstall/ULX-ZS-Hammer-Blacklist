include("config.lua"); config = config || {}; config.textFont = config.textFont || "default"; config.selfMessage = config.selfMessage || "You have been banned from building"; config.headName = config.headName || "Banned from building"; local function nothing() end; local noodle = ulx.command( ""..config.ulxcatName, ""..config.ulxName, nothing, "!"..config.command ) noodle:addParam{ type=ULib.cmds.PlayerArg } noodle:addParam{ type=ULib.cmds.NumArg, hint="minutes, 0 for perma", ULib.cmds.optional, ULib.cmds.allowTimeString, min=0 } noodle:addParam{ type=ULib.cmds.StringArg, hint="reason", ULib.cmds.optional, ULib.cmds.takeRestOfLine, completes=ulx.common_kick_reasons } noodle:defaultAccess( ULib.ACCESS_ADMIN ) noodle:help( "Bans target from building." ) local votenoodle = ulx.command( ""..config.ulxcatName, "vote"..config.ulxName, nothing, "!vote"..config.command ) votenoodle:addParam{ type=ULib.cmds.PlayerArg } votenoodle:addParam{ type=ULib.cmds.StringArg, hint="reason", ULib.cmds.optional, ULib.cmds.takeRestOfLine, completes=ulx.common_noodle_reasons } votenoodle:defaultAccess( ULib.ACCESS_ADMIN ) votenoodle:help( "Starts a public building ban vote against target." ) local unnoodle = ulx.command( ""..config.ulxcatName, "un"..config.ulxName, nothing, "!un"..config.command ) unnoodle:addParam{ type=ULib.cmds.PlayerArg } unnoodle:defaultAccess( ULib.ACCESS_ADMIN ) unnoodle:help( "Unban target from building." ) local unnoodleid = ulx.command( ""..config.ulxcatName, "unid"..config.ulxName, nothing ) unnoodleid:addParam{ type=ULib.cmds.StringArg, hint="steamid" } unnoodleid:defaultAccess( ULib.ACCESS_ADMIN ) unnoodleid:help( "Unban target from building." ) local function distance(pos1,pos2) return math.sqrt((pos1.x-pos2.x)^2+(pos1.y-pos2.y)^2+(pos1.z-pos2.z)^2) end local TColor; hook.Add("HUDPaint", "ZombieTeamIsBanned", function() table.foreach(player.GetAll(), function(i, ply) if (ply:Team()==LocalPlayer():Team()) and (ply:Team() == TEAM_HUMAN) and ply:GetNWBool("IsUlxNoodled") then local pos = ply:EyePos() pos = pos:ToScreen(); if ply==LocalPlayer() then draw.DrawText( config.selfMessage, config.textFont , ScrW() - 70, ScrH() - 63, Color(255, 255, 255, 255),TEXT_ALIGN_RIGHT) else draw.DrawText(config.headName, config.textFont, pos.x, pos.y -70, Color(255,10,10,255/(distance(LocalPlayer():GetShootPos(),ply:GetShootPos())/100)), 1) end end end) end) 

